<!doctype html>

<html class="no-js" lang="pt-br">
  <head>
      <title>Alterar Dados</title>
   <!-- $Include templates/lib/html/head.html --> 
  </head>
  <body>
   

   <!-- $Include templates/lib/html/topbar.html --> 

    <div class="row">
      <div class="medium-10 medium-offset-1 columns"> <h1>Alterar dados</h1> </div>
    </div>

    <div class="row">
      <div class="medium-10 medium-offset-1 columns">
        <nav class="breadcrumbs">
          <a href="#" class="current">Dados pessoais</a>
          <a href="?action=alterarSenhaView&usecase=manterUsuario">Alterar senha</a>
          <a href="#">Alterar Foto de Perfil</a>
        </nav>
      </div>
    </div>

    <div class="row">
      <div class="medium-10 medium-offset-1 columns">
        <form id="form" data-abide> 

          <div class="row">
            <div class="medium-6 small-6 columns">
            <label>Nome <small>Obrigatório</small>
              <input type="text"  required  value="${egresso.nome}" />
            </label>
            <small class="error">Você precisa preencher o campo.</small>
            </div>

            <div class="medium-6 small-6 columns">
              <label>E-mail <small>Obrigatório</small>
                <input type="email" required   value="${egresso.email}" />
              </label> <small class="error">Você precisa preencher o campo
              .</small>
            </div>
          </div>

           <div class="row">
            <div class="medium-4  columns">
              <label>Estado Civil
                <select>
                <!-- $BeginBlock estado_civil -->
                  <option ${egresso.estado_civil.selected} value="${egresso.estado_civil.value}"> ${egresso.estado_civil.desc}</option>
                <!-- $EndBlock estado_civil -->
                </select>
              </label>
            </div>

            <div class="row">
            	<div class="medium-2 medium-offset-2 columns">
            		<label>Quantos filhos 
            			<input type="number" min="0" max="50" value="${egresso.qtdFilhos}">
            		</label>
            	</div>
            </div>


          </div>

            <div class="row">
	            <div class="medium-4 small-4 columns">
		            <label>Telefone
		              <input class="telefone" type="text" required placeholder="(00) 0000-0000" value="${egresso.telefone}" />
		            </label> <small class="error">Preencha corretamente o campo.</small>
	            </div>
          </div>
          

          <div class="row">
            <div class="medium-12 small-12 columns">
            <label>Endereço
              <input type="text" placeholder="Rua Exemplo, Número 4..." value="${egresso.endereco}" />
            </label>
            </div>
          </div>

          <div class="row">
            <div class="medium-4 small-4 columns">
              <label>País
                <select id="egresso_pais">
                  <!-- $BeginBlock egresso.pais -->
                  <option value="${egresso.pais.value}"> ${egresso.pais.desc}</option>
                <!-- $EndBlock egresso.pais -->
                </select>
              </label>
            </div>

            <div id="egresso_estado_div" class="medium-4 small-4 columns">
              <label>Estado
                <select id="egresso_estado">
                  
                </select>
              </label>
            </div>

            <div id="egresso_cidade_div" class="medium-4 small-4 columns">
              <label>Cidade
                <select id="egresso_cidade">
                  
                </select>
              </label>
            </div>

             <!--Esse campo deverá apareser somente se o país selecionado for diferente de Brasil--> 
          <div id="egresso_complemento" class="row hide">
            <div class="medium-7 small-7 columns">
              <label>Estado/Província/Região
                <input type="text"  name="" placeholder="Digite o complemento do seu endereço." value="${egresso.complemento}">
              </label> 
            </div>  
          </div>

            <fieldset class="panel">
              <legend>Trabalho</legend>

              <div class="row">
                <div class="medium-5 small-5 columns">
                <label>Empresa
                  <input type="text" placeholder="Nome da empresa"  value="${emprego.nome}"/>
                </label>
                </div>

                <div class="medium-5 small-5 columns">
                  <label>Atuação profissional
                    <select>
                        <!-- $BeginBlock emprego.atuacao -->
                          <option ${emprego.atuacao.selected} value="${emprego.atuacao.value}"> ${emprego.atuacao.desc}</option>
                        <!-- $EndBlock emprego.atuacao -->
                    </select>
                  </label>
                </div>
              </div>

             

              <div class="row">
            <div class="medium-4 small-4 columns">
              <label>País
                <select id="emprego_pais">
                   <!-- $BeginBlock egresso.pais -->
                  <option value="${egresso.pais.value}"> ${egresso.pais.desc}</option>
                <!-- $EndBlock egresso.pais -->
                </select>
              </label>
            </div>

            <div id="emprego_estado_div" class="medium-4 small-4 columns hide">
              <label>Estado
                <select id="emprego_estado">
                  
                </select>
              </label>
            </div>

            <div id="emprego_cidade_div" class="medium-4 small-4 columns hide">
              <label>Cidade
                <select id="emprego_cidade">
                  
                </select>
              </label>
            </div>

            <!--Esse campo deverá apareser somente se o país selecionado for diferente de Brasil--> 
          <div id="emprego_complemento" class="row">
            <div class="medium-7 small-7 columns">
              <label>Estado/Província/Região
                <input type="text"  name="" placeholder="Digite o complemento do seu endereço." value="${emprego.complemento}">
              </label> 
            </div>    
        
          </div>
          </div>

          <div class="row">
            <div class="medium-4 small-4 columns">
                  <label>Faixa Salarial
                    <select>
                       <!-- $BeginBlock emprego.faixa -->
                          <option ${emprego.faixa.selected} value="${emprego.faixa.value}"> ${emprego.faixa.desc}</option>
                        <!-- $EndBlock emprego.faixa -->
                    </select>
                  </label>
                </div>
          </div>
            </fieldset>

            <!--Seção para Redes Sociais--> 
            <div class="row">
            <div class="medium-3 small-3 columns">
              <label> Redes Sociais
                <select>
                  <!-- $BeginBlock rede_social -->
                    <option value="${egresso.rede_social.value}"> ${egresso.rede_social.desc}</option>
                  <!-- $EndBlock rede_social -->
                </select>
              </div>
              <div class="medium-9 small-9 columns end">
                  <label>Link para acesso
                    <input type="text" value="${usuario.email}">
                  </label>
              </div>
            </div>

            <div class="row">
            <div class="medium-3 small-3 columns">
              <label> 
                <select>
                  <!-- $BeginBlock rede_social -->
                    <option value="${egresso.rede_social.value}"> ${egresso.rede_social.desc}</option>
                  <!-- $EndBlock rede_social -->
                </select>
              </div>
              <div class="medium-9 small-9 columns end">
                  <label>
                    <input type="text" value="${usuario.email}">
                  </label>
              </div>
            </div>

            <div class="row">
            <div class="medium-3 small-3 columns">
              <label> 
                <select>
                  <!-- $BeginBlock rede_social -->
                    <option value="${egresso.rede_social.value}"> ${egresso.rede_social.desc}</option>
                  <!-- $EndBlock rede_social -->
                </select>
              </div>
              <div class="medium-9 small-9 columns end">
                  <label>
                    <input type="text" value="${usuario.email}">
                  </label>
              </div>
            </div>

            <hr />

            <div class="row panel">
            	<div class="medium-12 columns">
            	<input id="checkbox"type="checkbox" /><label for="checkbox">Deseja tornar visíveis no seu perfil os dados de telefone, e-mail e redes sociais?</label>
            	</div>
            </div>

			      <hr /> 
            <!-- botões --> 
            <div class="row">
              <div class="medium-2 small-3 columns right">
                <button class="button success tiny radius" type="submit">Alterar dados</button>
              </div>

              <div class="medium-2 small-3 columns left">
                <button class="button info tiny radius">Tela principal</button>
              </div>
            </div>
        </form>

      </div>

    </div>
    

    <!-- $Include templates/lib/html/footerscripts.html --> 
     <script src="templates/lib/js/jquery.mask.min.js"></script>

    <script>
      $(document).ready(function(){
          $('.telefone').mask('(99) 9999-9999');
          
          //Arrumando formulário egresso
          $('#egresso_pais').change(function() {
                    var str = "";
                    str += $('#egresso_pais option:selected').text();
                    console.log( str );
                    if( str.trim() == 'BRASIL'){
                        console.log('entrei aqui'); 
                        $('#egresso_cidade_div').removeClass('hide'); 
                        $('#egresso_estado_div').removeClass('hide');
                        $('#egresso_complemento').addClass('hide');
                    }else{
                        $('#egresso_cidade_div').addClass('hide'); 
                        $('#egresso_estado_div').addClass('hide');
                        $('#egresso_complemento').removeClass('hide');
                    }
          }).trigger('change');

          //Arrumando formulário emprego
          $('#emprego_pais').change(function() {
                    var str = "";
                    str += $('#emprego_pais option:selected').text();
                    console.log( str );
                    if( str.trim() == 'BRASIL'){
                        console.log('entrei aqui'); 
                        $('#emprego_cidade_div').removeClass('hide'); 
                        $('#emprego_estado_div').removeClass('hide');
                        $('#emprego_complemento').addClass('hide');
                    }else{
                        $('#emprego_cidade_div').addClass('hide'); 
                        $('#emprego_estado_div').addClass('hide');
                        $('#emprego_complemento').removeClass('hide');
                    }
          }).trigger('change');
          
          $('select').change(function(){
            if(this.id == '') return; 

            var selected = $('#'+this.id+' option:selected').text().trim(); 
            //Formulário do egresso, Ajax estado. 
            if(this.id == 'egresso_pais'  && selected == 'BRASIL'){
                getByAjax({ country : selected} ,'index.php?action=getStates&usecase=ajaxServices', function(data){
                data = JSON.parse(data); 
                //To-do: verificar se esse array vem sem nada ou com uma coisa diferente de um array; 
                  $('#egresso_estado > option').each(function(){ this.remove(); }); 

                  $.each(data, function (i, item) { 
                      $('#egresso_estado').append($('<option>', { 
                          value: item,
                          text : item 
                      }));
                  });  
              }); 
              return; 
            }

            //Formulário do emprego, Ajax estado. 
            if(this.id == 'emprego_pais'  && selected == 'BRASIL'){
                getByAjax({ country : selected} ,'index.php?action=getStates&usecase=ajaxServices', function(data){
                data = JSON.parse(data); 
                //To-do: verificar se esse array vem sem nada ou com uma coisa diferente de um array; 
                  $('#emprego_estado > option').each(function(){ this.remove(); });  
                  $.each(data, function (i, item) { 
                      $('#emprego_estado').append($('<option>', { 
                          value: item,
                          text : item 
                      }));
                  });  
              }); 
              return; 
            }

            //Formulário do egresso, Ajax cidade. 
            if(this.id == 'egresso_estado'){
               getByAjax({ state : selected} ,'index.php?action=getCities&usecase=ajaxServices', function(data){
                data = JSON.parse(data); 
                //To-do: verificar se esse array vem sem nada ou com uma coisa diferente de um array; 
                  $('#egresso_cidade > option').each(function(){ this.remove(); });  
                  $.each(data, function (i, item) { 
                      $('#egresso_cidade').append($('<option>', { 
                          value: item,
                          text : item 
                      }));
                  });  
              }); 
              return; 
            }

            //Formulário do emprego, Ajax cidade. 
            if(this.id == 'emprego_estado'){
              getByAjax({ state : selected} ,'index.php?action=getCities&usecase=ajaxServices', function(data){
                data = JSON.parse(data); 
                //To-do: verificar se esse array vem sem nada ou com uma coisa diferente de um array; 
                  $('#emprego_cidade > option').each(function(){ this.remove(); });  
                  $.each(data, function (i, item) { 
                      $('#emprego_cidade').append($('<option>', { 
                          value: item,
                          text : item 
                      }));
                  });  
              }); 
              return; 
            }
          }); 

          function getByAjax(data, url , foo){
            $.ajax({ 
             url : url,
             method : 'post',
             data: data}
             ).done(function(data){
               foo(data); 
             }).fail(function(){

             }).always(function(){

             }); 
          }
      });
    </script>
  </body>
</html>
